<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>理解正则中的(?=p)、(?!p)、(?&lt;=p)、(?&lt;!p) | 大木_笔记</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="记录工作和学习过程中的笔记">
    <link rel="preload" href="/ysblog/assets/css/0.styles.e661b340.css" as="style"><link rel="preload" href="/ysblog/assets/js/app.05f40ecb.js" as="script"><link rel="preload" href="/ysblog/assets/js/2.101f09ec.js" as="script"><link rel="preload" href="/ysblog/assets/js/5.bd54095f.js" as="script"><link rel="prefetch" href="/ysblog/assets/js/10.aba1ce7e.js"><link rel="prefetch" href="/ysblog/assets/js/11.232cd946.js"><link rel="prefetch" href="/ysblog/assets/js/12.22125e24.js"><link rel="prefetch" href="/ysblog/assets/js/13.641bf3cf.js"><link rel="prefetch" href="/ysblog/assets/js/14.24ccc943.js"><link rel="prefetch" href="/ysblog/assets/js/15.56161087.js"><link rel="prefetch" href="/ysblog/assets/js/16.205bd373.js"><link rel="prefetch" href="/ysblog/assets/js/17.bd633a29.js"><link rel="prefetch" href="/ysblog/assets/js/18.33d43e7e.js"><link rel="prefetch" href="/ysblog/assets/js/19.a2911d20.js"><link rel="prefetch" href="/ysblog/assets/js/20.07624a1c.js"><link rel="prefetch" href="/ysblog/assets/js/21.a4151fba.js"><link rel="prefetch" href="/ysblog/assets/js/22.141540b5.js"><link rel="prefetch" href="/ysblog/assets/js/23.91fde9ee.js"><link rel="prefetch" href="/ysblog/assets/js/24.cca104ac.js"><link rel="prefetch" href="/ysblog/assets/js/25.5cc0b6e3.js"><link rel="prefetch" href="/ysblog/assets/js/26.5835c007.js"><link rel="prefetch" href="/ysblog/assets/js/27.132ee99d.js"><link rel="prefetch" href="/ysblog/assets/js/28.dae014a1.js"><link rel="prefetch" href="/ysblog/assets/js/29.a922ac25.js"><link rel="prefetch" href="/ysblog/assets/js/3.859ec158.js"><link rel="prefetch" href="/ysblog/assets/js/30.215eea15.js"><link rel="prefetch" href="/ysblog/assets/js/31.a6a3ecad.js"><link rel="prefetch" href="/ysblog/assets/js/32.2f04c66d.js"><link rel="prefetch" href="/ysblog/assets/js/33.2e16f460.js"><link rel="prefetch" href="/ysblog/assets/js/34.6f7d019b.js"><link rel="prefetch" href="/ysblog/assets/js/35.72665780.js"><link rel="prefetch" href="/ysblog/assets/js/36.f8c9d77b.js"><link rel="prefetch" href="/ysblog/assets/js/37.aa3efe17.js"><link rel="prefetch" href="/ysblog/assets/js/38.6cb4e1db.js"><link rel="prefetch" href="/ysblog/assets/js/39.43e17a0d.js"><link rel="prefetch" href="/ysblog/assets/js/4.ee24ae0f.js"><link rel="prefetch" href="/ysblog/assets/js/6.dcc1de99.js"><link rel="prefetch" href="/ysblog/assets/js/7.316c9739.js"><link rel="prefetch" href="/ysblog/assets/js/8.87405e82.js"><link rel="prefetch" href="/ysblog/assets/js/9.de91e189.js">
    <link rel="stylesheet" href="/ysblog/assets/css/0.styles.e661b340.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ysblog/" class="home-link router-link-active"><!----> <span class="site-name">大木_笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ysblog/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ysblog/web/JS/blog1.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/browser/blog1.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/jQuery/blog1.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/underscore/blog1.html" class="nav-link">
  underscore
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/webpack/blog1.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/vue/blog1.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构" class="dropdown-title"><span class="title">数据结构</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据结构" class="mobile-dropdown-title"><span class="title">数据结构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ysblog/DataStructure/queue/blog1.html" class="nav-link">
  队列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ysblog/other/regex/blog1.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  正则表达式
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ysblog/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ysblog/web/JS/blog1.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/browser/blog1.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/jQuery/blog1.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/underscore/blog1.html" class="nav-link">
  underscore
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/webpack/blog1.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/ysblog/web/vue/blog1.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构" class="dropdown-title"><span class="title">数据结构</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据结构" class="mobile-dropdown-title"><span class="title">数据结构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ysblog/DataStructure/queue/blog1.html" class="nav-link">
  队列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ysblog/other/regex/blog1.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  正则表达式
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>regex</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ysblog/other/regex/blog1.html" aria-current="page" class="active sidebar-link">理解正则中的(?=p)、(?!p)、(?&lt;=p)、(?&lt;!p)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ysblog/other/regex/blog1.html#正文" class="sidebar-link">正文</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ysblog/other/regex/blog1.html#匹配字符" class="sidebar-link">匹配字符</a></li><li class="sidebar-sub-header"><a href="/ysblog/other/regex/blog1.html#匹配位置" class="sidebar-link">匹配位置</a></li></ul></li><li class="sidebar-sub-header"><a href="/ysblog/other/regex/blog1.html#正则速查表" class="sidebar-link">正则速查表</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="理解正则中的-p-、-p-、-p-、-p"><a href="#理解正则中的-p-、-p-、-p-、-p" class="header-anchor">#</a> 理解正则中的(?=p)、(?!p)、(?&lt;=p)、(?&lt;!p)</h1> <h2 id="正文"><a href="#正文" class="header-anchor">#</a> 正文</h2> <p>要理解(?=p)跟(?!p)，要知道正则里面有个 <strong>匹配位置</strong> 这一说。</p> <p>正则的匹配模式分为两种</p> <ol><li>匹配字符</li> <li>匹配位置</li></ol> <h3 id="匹配字符"><a href="#匹配字符" class="header-anchor">#</a> 匹配字符</h3> <p>匹配字符我相信都能理解，直接匹配字符串中的字符</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/hello/</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; true</span>
</code></pre></div><p>匹配字符还分为纵向匹配，以及横向匹配</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//横向匹配，一个正则可匹配的字符串的长度不是固定的</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/ab{2,5}c/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;abc abbc abbbc abbbbc abbbbbc abbbbbbc&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;abbc&quot;, &quot;abbbc&quot;, &quot;abbbbc&quot;, &quot;abbbbbc&quot;]</span>

<span class="token comment">//纵向匹配，一个正则匹配的字符串，具体到某一位字符时，它可以不是某个确定的字符，可以有多种可能</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/a[123]b/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;a0b a1b a2b a3b a4b&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;a1b&quot;, &quot;a2b&quot;, &quot;a3b&quot;]</span>
</code></pre></div><p>好了，匹配字符就介绍到这里，这不是本文的重点，重点是匹配位置</p> <h3 id="匹配位置"><a href="#匹配位置" class="header-anchor">#</a> 匹配位置</h3> <h4 id="什么是位置"><a href="#什么是位置" class="header-anchor">#</a> 什么是位置</h4> <p>位置是相邻字符之间的位置，可以理解成空字符 &quot;&quot;。比如，下图中箭头所指的地方</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>&quot;hello&quot; == &quot;&quot; + &quot;h&quot; + &quot;&quot; + &quot;e&quot; + &quot;&quot; + &quot;l&quot; + &quot;&quot; + &quot;l&quot; + &quot;&quot; + &quot;o&quot; + &quot;&quot;</p> <h4 id="p-、-p"><a href="#p-、-p" class="header-anchor">#</a> (?=p)、(?!p)</h4> <p>(?=p)匹配的是什么呢，匹配的是 <strong>p</strong> 前面的位置，或者说，该位置后面的字符要匹配 <strong>p</strong>。</p> <p>比如 (?=h)，表示 &quot;h&quot; 字符前面的位置，例如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=h)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;#hello&quot;</span>
</code></pre></div><p>而 (?!p) 就是 (?=p) 的反面意思，比如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?!h)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;h#e#l#l#o#&quot;          除了h前面没有加#，其他的位置都加上了#</span>
</code></pre></div><h4 id="正则"><a href="#正则" class="header-anchor">#</a> 正则</h4> <p>现在再回过头来看下那个正则：var regex = /(?!^)(?=(\d{3})+$)/g</p> <p>它是用来将数字用千位分隔符表示，比如把 &quot;12345678&quot;，变成 &quot;12,345,678</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(?!^)(?=(\d{3})+$)/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;12345678&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;12,345,678&quot;</span>
result <span class="token operator">=</span> <span class="token string">&quot;123456789&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;123,456,789&quot;</span>

</code></pre></div><h4 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h4> <p>正则 /(?!^)(?=(\d{3})+$) 分为 <strong>(?!^)</strong> 以及 <strong>(?=(\d{3})+$)</strong></p> <p><strong>(?=(\d{3})+$)</strong> ：<strong>(?=\d{3}$)</strong> 匹配 <strong>\d{3}$</strong> 前面的位置。而 <strong>\d{3}$</strong> 匹配的是目标字符串最后那 3 位数字</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;12345678&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=\d{3}$)/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;123456,789&quot;</span>
</code></pre></div><p>因为逗号出现的位置，要求后面 3 个数字一组，也就是 \d{3} 至少出现一次。此时可以使用量词 +：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;12345678&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=(\d{3})+$)/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;,123,456,789&quot;</span>
</code></pre></div><p><strong>(?!^)</strong> ：匹配前面不是开头的位置，如果不加上的话，会 &quot;123456789&quot;，变成 &quot;,123,456,789&quot;，开头会有一个逗号</p> <h4 id="p-、-p-2"><a href="#p-、-p-2" class="header-anchor">#</a> (?&lt;=p)、(?&lt;!p)</h4> <p>说到这里，(?&lt;=p)跟(?&lt;!p)也就不难理解了</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//(?&lt;=p)表示p表达式后面的位置</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?&lt;=h)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;h#ello&quot;</span>

<span class="token function">而</span> <span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">!</span>p<span class="token punctuation">)</span> <span class="token function">就是</span> <span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span>p<span class="token punctuation">)</span> 的反面意思，比如：
<span class="token comment">//(?&lt;!p)是(?&lt;=p)的反面意思，匹配不是p表达式后面的位置</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?&lt;!h)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;#he#l#l#o#&quot;</span>
</code></pre></div><h2 id="正则速查表"><a href="#正则速查表" class="header-anchor">#</a> 正则速查表</h2> <p><img src="/ysblog/assets/img/16d4824d65c11efd.177fbc7b.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/ysblog/assets/js/app.05f40ecb.js" defer></script><script src="/ysblog/assets/js/2.101f09ec.js" defer></script><script src="/ysblog/assets/js/5.bd54095f.js" defer></script>
  </body>
</html>
